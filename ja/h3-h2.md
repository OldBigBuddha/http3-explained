# HTTP/2 と比較した HTTP/3

HTTP/3 は、自身でストリームを処理するトランスポートプロトコルである QUIC に合わせた設計になっています。

HTTP/2 は TCP を前提とした設計のため、HTTP レイヤ でストリームを処理します。

## 類似点

この2つのプロトコルは、クライアントに対して事実上同じ機能を提供します。

- どちらのプロトコルも、ストリームを提供します。

- どちらのプロトコルも、server push のサポートを提供します。

- どちらのプロトコルもヘッダー圧縮が提供されます、QPACK と HPACK も設計上非常に似ています。

- どちらのプロトコルも、1つの接続でストリームによる多重化が提供されます。

- どちらのプロトコルも、ストリームの優先順位付けを行います。

## 相違点

細かな相違点がありますが、主に HTTP/3 が QUIC を利用することによるものです。

- 高速にオープンされる TCP と TLS では、一般的にデータの送信が少なく、  
  しばしば問題を引き起こします。  
  一方で、HTTP/3 は QUIC の 0-RTT ハンドシェイクのおかげで、early data のサポートが可能になりました。

- HTTP/3 は QUIC のおかげで TCP と TLS の組み合わせより高速なハンドシェイクを実現します。

- HTTP/3 は安全でなかったり暗号化されていないバージョンは存在しません。  
  HTTP/2 は、インターネット上においては稀なことであるにせよ、 HTTPS なしで実装することも可能です。

- HTTP/2 では TLS ハンドシェイク を ALPN 拡張 を利用し行うことで、直接ネゴシエーションが可能です。
  一方で、HTTP/3 では QUIC を使うため、クライアントに対して `Alt-Svc` ヘッダーレスポンス を最初に送って
  その事実を伝える必要があります。
